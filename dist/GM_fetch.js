!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.GM_fetch=r():e.GM_fetch=r()}(window,(function(){return function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(o,n,function(r){return e[r]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";function o(e){if("string"!=typeof e&&(e=String(e)),/[^\w#$%&'*+.^`|~-]/i.test(e))throw new TypeError("Invalid character in header field name");return e}function n(e){return"string"!=typeof e&&(e=String(e)),e}Object.defineProperty(r,"__esModule",{value:!0}),r.Response=r.Request=r.Headers=void 0;class s{constructor(e){this.map={},this.map={},e instanceof s?e.forEach(((e,r)=>{this.append(r,e)})):e&&Object.getOwnPropertyNames(e).forEach((r=>{this.append(r,e[r])}))}append(e,r){e=o(e),r=n(r);const t=this.map[e];void 0===t?this.map[e]=[r]:t.push(r)}delete(e){delete this.map[o(e)]}get(e){const r=this.map[o(e)];return r?r[0]:null}getAll(e){return this.map[o(e)]||[]}has(e){return Object.prototype.hasOwnProperty.call(this.map,o(e))}set(e,r){this.map[o(e)]=[n(r)]}forEach(e,r){Object.getOwnPropertyNames(this.map).forEach((t=>{this.map[t].forEach((o=>{e.call(r,o,t,this)}))}))}*[Symbol.iterator](){for(const[e,r]of Object.entries(this.map))for(const t of r)yield[e,t]}}function i(e){return new Promise(((r,t)=>{e.addEventListener("load",(()=>{r(e.result)})),e.addEventListener("error",(()=>{t(e.error)}))}))}r.Headers=s;const a=new TextEncoder,d=new TextDecoder;class u{constructor(){this._bodyUsed=!1}get bodyUsed(){return this._bodyUsed}blob(){if(this._bodyUsed)return Promise.reject(new TypeError("Body contents already read"));this._bodyUsed=!0;const e=this.body;if("string"==typeof e||e instanceof ArrayBuffer)return Promise.resolve(new Blob([e]));if(e instanceof Blob)return Promise.resolve(e);if(e instanceof FormData)return Promise.reject(new TypeError("A multipart FormData body cannot be read as a blob"));if(void 0===e)return Promise.reject(new Error("No body is present"));throw new TypeError("Invalid body type")}arrayBuffer(){if(this._bodyUsed)return Promise.reject(new TypeError("Body contents already read"));this._bodyUsed=!0;const e=this.body;if("string"==typeof e)return Promise.resolve(a.encode(e));if(e instanceof ArrayBuffer)return Promise.resolve(e);if(e instanceof Blob)return Promise.resolve(function(e){const r=new FileReader;return r.readAsArrayBuffer(e),i(r)}(e));if(e instanceof FormData)return Promise.reject(new TypeError("A multipart FormData body cannot be read as an arrayBuffer"));if(void 0===e)return Promise.reject(new Error("No body is present"));throw new TypeError("Invalid body type")}text(){if(this._bodyUsed)return Promise.reject(new TypeError("Body contents already read"));this._bodyUsed=!0;const e=this.body;if("string"==typeof e)return Promise.resolve(e);if(e instanceof ArrayBuffer)return Promise.resolve(d.decode(e));if(e instanceof Blob)return Promise.resolve(function(e){const r=new FileReader;return r.readAsText(e),i(r)}(e));if(e instanceof FormData)return Promise.reject(new TypeError("A multipart FormData body cannot be read as text"));if(void 0===e)return Promise.reject(new Error("No body is present"));throw new TypeError("Invalid body type")}formData(){if(this._bodyUsed)return Promise.reject(new TypeError("Body contents already read"));this._bodyUsed=!0;const e=this.body;if("string"==typeof e)return Promise.reject(new TypeError("Unsupported: Cannot parse FormData from a string body"));if(e instanceof ArrayBuffer)return Promise.reject(new TypeError("Unsupported: Cannot parse FormData from an ArrayBuffer body"));if(e instanceof Blob)return Promise.reject(new TypeError("Unsupported: Cannot parse FormData from a Blob body"));if(e instanceof FormData)return Promise.resolve(e);if(void 0===e)return Promise.reject(new Error("No body is present"));throw new TypeError("Invalid body type")}json(){return this.text().then(JSON.parse)}}const f=new Set(["GET","HEAD","POST"]);class c extends u{constructor(e,r){if(super(),r=r||{},this.url=e,this.credentials=r.credentials||"omit",this.headers=new s(r.headers),this.method=function(e){if(e=e.toUpperCase(),!f.has(e))throw new Error("Unsupported HTTP method for GM_xmlhttpRequest: "+e);return e}(r.method||"GET"),this.mode=r.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r.body)throw new TypeError("Body not allowed for GET or HEAD requests");this.bodyStore=r.body}get body(){return this.bodyStore}get bodyRaw(){return this.bodyStore}}r.Request=c;class p extends u{constructor(e){super(),this.response=e,this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=function(e){const r=new s;return e.trim().split("\n").forEach((e=>{const t=e.trim().split(":"),o=t.shift().trim(),n=t.join(":").trim();r.append(o,n)})),r}(e.responseHeaders),this.url=function(e,r,t){if(e)return e;if(/^X-Request-URL:/m.test(r))return t.get("X-Request-URL");return null}(e.finalUrl,e.responseHeaders,this.headers)||""}get body(){return this.response.response}text(){return this._bodyUsed?Promise.reject(new TypeError("Body contents already read")):(this._bodyUsed=!0,Promise.resolve(this.response.responseText))}}r.Response=p,r.default=function(e,r){let t;if(t=e instanceof c?r?new c(e.url,r):e:new c(e,r),!["GET","HEAD","POST"].includes(t.method))throw new Error("Unsupported method for GM_xmlhttpRequest");return new Promise((function(e,r){const o={};o.method=t.method,o.responseType="arraybuffer",o.url=t.url,o.onload=t=>{const o=t.status;o<100||o>599?r(new TypeError("Network request failed: Status code "+o)):e(new p(t))},o.onerror=()=>{r(new TypeError("Network request failed"))},o.headers={};for(const[e,r]of t.headers)o.headers[e]=r;void 0!==t.bodyRaw&&(o.data=t.bodyRaw),GM_xmlhttpRequest(o)}))}}]).default}));